HotelGenius â€” Guide dâ€™apprentissage complet pour reconstruire le projet de zÃ©ro

> Langue : FranÃ§ais (avec termes techniques en anglais quand appropriÃ©)




---

But du guide

Ce guide est conÃ§u pour te faire apprendre en pratiquant : il tâ€™accompagne pas-Ã â€‘pas pour reconstruire HotelGenius depuis zÃ©ro (monorepo TypeScript, PostgreSQL + Drizzle, backend Express, frontend React + Vite, tests, CI/CD, dÃ©ploiement). Chaque jour a des objectifs clairs, des commandes Ã  exÃ©cuter, du code Ã  copier-coller et des exercices pour vÃ©rifier ta comprÃ©hension.

Tu peux suivre ce guide tel quel (6 semaines), ou accÃ©lÃ©rer / ralentir selon ta disponibilitÃ©.


---

Comment utiliser ce guide

Chaque semaine est divisÃ©e en 5 jours de travail (lundiâ€“vendredi). Tu peux convertir en plus ou moins de jours selon ton emploi du temps.

Ã€ la fin de chaque jour : Checkpoint (tests miniatures, vÃ©rifications). Si tu bloques, copie lâ€™erreur ici et je tâ€™aide.

Jâ€™inclus des issues GitHub (titre + description) prÃªtes Ã  crÃ©er.



---

Semaine 1 â€” Fondations & Base de donnÃ©es (5 jours)

Objectif semaine

Avoir un monorepo initialisÃ©, un schÃ©ma Drizzle complet et migrations exÃ©cutÃ©es sur une base PostgreSQL.

Jour 1 â€” Setup monorepo et outils

Objectifs : initialiser repo, installer pnpm, config workspace, crÃ©er dossiers.

Commandes

mkdir hotelgenius && cd hotelgenius
git init
pnpm init -y
# modifie package.json :
# "workspaces": ["client","server","shared"]
mkdir client server shared
pnpm -w add -D typescript eslint prettier

Checkpoint

git status montre repo initialisÃ©

package.json Ã  la racine contient workspaces


Issue GitHub

Titre: "Init monorepo + tooling"

Description: "Init repo, pnpm workspace, crÃ©er dossiers client/server/shared, installer TypeScript, ESLint, Prettier."



---

Jour 2 â€” Initialiser shared/ + Drizzle

Objectifs : crÃ©er package shared, installer drizzle-orm et drizzle-kit, crÃ©er shared/src/schema.ts.

Commandes

cd shared
pnpm init -y
pnpm add drizzle-orm drizzle-kit pg
pnpm add -D typescript
pnpm tsc --init

Fichier shared/src/schema.ts (copie-coller)

import { pgTable, varchar, text, integer, timestamp, sql, uniqueIndex } from "drizzle-orm/pg-core";

export const hotels = pgTable("hotels", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  name: text("name").notNull(),
  address: text("address"),
  currency: varchar("currency", { length: 3 }).default("HTG"),
  created_at: timestamp("created_at").defaultNow(),
});

export const rooms = pgTable("rooms", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  hotel_id: varchar("hotel_id").notNull().references(() => hotels.id),
  room_number: text("room_number").notNull(),
  room_type: text("room_type").notNull(),
  capacity: integer("capacity").notNull(),
  price_per_night: integer("price_per_night").notNull(),
  status: varchar("status", { length: 20 }).default("available"),
  created_at: timestamp("created_at").defaultNow(),
}, (table) => ({
  hotelRoomIdx: uniqueIndex("hotel_room_idx").on(table.hotel_id, table.room_number),
}));

// TODO: ajouter clients, reservations, payments, products, inventory

Checkpoint

shared compile (pnpm -w --filter shared tsc)

schema.ts prÃ©sent


Issue GitHub

Titre: "Shared: Drizzle schema initial"

Description: "Ajouter hotels et rooms, prÃ©parer pour migrations"



---

Jour 3 â€” ComplÃ©ter schÃ©ma & relations

Objectifs : ajouter tables users, clients, reservations, payments, products, inventory_items, sales.

Extrait exemple reservations (copie)

export const clients = pgTable("clients", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  hotel_id: varchar("hotel_id").notNull().references(() => hotels.id),
  first_name: text("first_name").notNull(),
  last_name: text("last_name"),
  phone: text("phone"),
  email: text("email"),
  created_at: timestamp("created_at").defaultNow(),
});

export const reservations = pgTable("reservations", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  hotel_id: varchar("hotel_id").notNull().references(() => hotels.id),
  room_id: varchar("room_id").notNull().references(() => rooms.id),
  client_id: varchar("client_id").notNull().references(() => clients.id),
  checkin_at: timestamp("checkin_at"),
  checkout_at: timestamp("checkout_at"),
  status: varchar("status", { length: 20 }).default("pending"),
  created_at: timestamp("created_at").defaultNow(),
});

Checkpoint

schema.ts contient toutes les tables


Issue GitHub

Titre: "Shared: Full schema (clients, reservations, payments, products, inventory)"

Description: "Ajout des tables et relations"



---

Jour 4 â€” Configurer drizzle-kit + migrations

Objectifs : config drizzle.config.ts, gÃ©nÃ©rer migration et exÃ©cuter sur DB locale / Neon.

Commandes

pnpm add -D drizzle-kit
# crÃ©er drizzle.config.ts Ã  la racine ou dans shared
# Exemple de commande
pnpm dlx drizzle-kit generate
pnpm dlx drizzle-kit migrate

Checkpoint

Migrations crÃ©Ã©es dans dossier drizzle/migrations

Tables prÃ©sentes dans la DB (psql ou GUI)


Issue GitHub

Titre: "DB: generate & run migrations"

Description: "Configurer drizzle-kit, gÃ©nÃ©rer migration initiale et apply"



---

Jour 5 â€” Tests & Documentation ERD

Objectifs : VÃ©rifier intÃ©gritÃ© DB, crÃ©er diagramme ER et README pour la DB.

TÃ¢ches

Exporter diagramme (draw.io ou Mermaid)

Documenter contraintes importantes (unique index hotel+room_number)

Tester via psql: SELECT * FROM rooms LIMIT 1;


Checkpoint

ERD enregistrÃ© dans docs/erd.png ou docs/erd.md


Issue GitHub

Titre: "Docs: ERD & DB README"

Description: "Ajouter diagramme ER et expliquer contraintes"



---

Semaine 2 â€” Backend minimal (5 jours)

Objectif semaine

Construire lâ€™API Express avec auth (JWT), DatabaseStorage et CRUD de base.

Jour 1 â€” Setup server TypeScript + dependencies

Commandes

cd ../server
pnpm init -y
pnpm add express dotenv cors jsonwebtoken bcryptjs zod drizzle-orm pg
pnpm add -D typescript ts-node-dev @types/express @types/node @types/jsonwebtoken
pnpm tsc --init

Fichier server/src/index.ts (starter)

import express from 'express';
import dotenv from 'dotenv';
import cors from 'cors';
dotenv.config();
const app = express();
app.use(cors());
app.use(express.json());
app.get('/health', (_, res) => res.json({ ok: true }));
const port = process.env.PORT ?? 5000;
app.listen(port, () => console.log(`Server listening on ${port}`));

Checkpoint

pnpm -w --filter server dev dÃ©marre le serveur


Issue GitHub

Titre: "Server: TypeScript + Express setup"

Description: "Init server, deps, starter index.ts"



---

Jour 2 â€” DatabaseStorage (abstraction)

Objectifs : CrÃ©er server/src/storage/DatabaseStorage.ts qui utilise Drizzle pour CRUD.

Pattern attendu

createRoom(data), getRooms(hotelId), updateRoom(id, data), deleteRoom(id)


Checkpoint

Unit tests simples pour DatabaseStorage (Vitest)


Issue GitHub

Titre: "Server: DatabaseStorage implementation"

Description: "Implement repository wrapper around Drizzle queries"



---

Jour 3 â€” Auth (register/login) et middleware

Objectifs : endpoints /api/auth/register, /api/auth/login, middleware authenticate.

Snippet authenticate (copie)

import jwt from 'jsonwebtoken';
export function authenticate(req, res, next) {
  const header = req.headers.authorization;
  if (!header) return res.status(401).json({ message: 'Unauthorized' });
  const token = header.split(' ')[1];
  try {
    const payload = jwt.verify(token, process.env.JWT_SECRET!);
    req.user = payload;
    next();
  } catch (err) { return res.status(401).json({ message: 'Invalid token' }); }
}

Checkpoint

Able to POST /api/auth/register and receive 201

POST /api/auth/login returns { token }


Issue GitHub

Titre: "Auth: register & login + authenticate middleware"

Description: "Implement auth flow with bcrypt and JWT"



---

Day 4 â€” Routes rooms CRUD

Objectifs : routes GET /api/rooms, POST /api/rooms, PATCH /api/rooms/:id, DELETE /api/rooms/:id.

Points importants

Validation Zod for input

Use req.user.hotel_id to isolate tenant data


Checkpoint

Test via curl/postman: create and list rooms


Issue GitHub

Titre: "API: rooms CRUD"

Description: "Implement all CRUD endpoints for rooms with validation and auth"



---

Jour 5 â€” Global error handler & logging

Objectifs : central error handler, simple logger (console to start), structure des routes.

Snippet error handler

app.use((err, req, res, next) => {
  console.error(err);
  const status = err.status || 500;
  res.status(status).json({ message: err.message || 'Internal Server Error' });
});

Checkpoint

Error handler kicks in for thrown errors


Issue GitHub

Titre: "Server: error handler & basic logging"

Description: "Add centralized error middleware and logs"



---

Semaine 3 â€” Backend avancÃ© (5 jours)

Objectif semaine

Ajouter rÃ©servations, paiements (Stripe sandbox) et facturation PDF.

Jour 1 â€” Reservations CRUD + business rules

Objectifs : crÃ©ation rÃ©servation avec vÃ©rification de disponibilitÃ© (no double booking), check-in/out endpoints.

Pseudo-algo de vÃ©rification disponibilitÃ©

1. Rechercher reservations existantes pour la mÃªme room avec chevauchement de dates


2. Si overlap -> rejeter



Checkpoint

Ability to create reservation for free slot


Issue GitHub

Titre: "Reservations: create with availability check"



---

Jour 2 â€” Payments (stripe sandbox)

Objectifs : implÃ©menter endpoints pour crÃ©er paiement / webhook (sandbox). Use Stripe test keys.

TÃ¢ches

Installer stripe SDK

Endpoint /api/payments/create-intent -> retourne client_secret

Webhook /api/payments/webhook pour confirmer status


Checkpoint

CrÃ©er payment intent et simuler succÃ¨s via Stripe Dashboard


Issue GitHub

Titre: "Payments: stripe integration (test)"



---

Jour 3 â€” GÃ©nÃ©ration de facture PDF

Objectifs : produire PDF invoice liÃ© Ã  reservation/payment (pdfkit or jsPDF server-side)

Checkpoint

Endpoint /api/invoices/:id/pdf renvoie PDF tÃ©lÃ©chargeable


Issue GitHub

Titre: "Invoices: generate PDF"



---

Jour 4 â€” Relations & transactions

Objectifs : Utiliser transactions Drizzle pour opÃ©rations atomiques (ex: create reservation + payment)

Checkpoint

Transaction rollback en cas dâ€™erreur


Issue GitHub

Titre: "DB: use transactions for booking+payment"



---

Jour 5 â€” Docs API & Postman collection

Objectifs : documenter endpoints, exporter collection Postman/ThunderClient

Checkpoint

Postman import fonctionne


Issue GitHub

Titre: "Docs: API & Postman collection"



---

Semaine 4 â€” Frontend (5 jours)

Objectif semaine

Construire lâ€™interface React connectÃ©e Ã  lâ€™API pour le module hÃ´tel.

Jour 1 â€” Init client Vite + Tailwind

Commandes

cd ../client
pnpm create vite@latest . --template react-ts
pnpm add -D tailwindcss postcss autoprefixer
pnpm add @tanstack/react-query wouter
pnpm tailwindcss init -p

Checkpoint

pnpm dev dÃ©marre lâ€™app Vite


Issue GitHub

Titre: "Client: Vite + Tailwind setup"



---

Jour 2 â€” Auth UI + login form

Objectifs : page /login, form, call /api/auth/login, gÃ©rer token (cookie httpOnly or in-memory)

Checkpoint

User can login and token is stored (or cookie set)


Issue GitHub

Titre: "Client: login page and auth flow"



---

Jour 3 â€” Dashboard + rooms page

Objectifs : pages /dashboard, /rooms (list + create modal), use useRooms hook

Exemple hook useRooms

import { useQuery } from '@tanstack/react-query';
export function useRooms() {
  return useQuery(['rooms'], async () => {
    const res = await fetch('/api/rooms', { credentials: 'include' });
    if (!res.ok) throw new Error('Failed');
    return res.json();
  });
}

Checkpoint

Rooms list displays data from API


Issue GitHub

Titre: "Client: rooms page + hooks"



---

Jour 4 â€” Reservations UI (calendar or list)

Objectifs : page reservations + create reservation form with date pickers

Checkpoint

Create reservation flow works end-to-end (frontend -> backend)


Issue GitHub

Titre: "Client: reservations page"



---

Jour 5 â€” Polishing UI & responsive

Objectifs : style pages, mobile responsive, shared components (Card, Table, Modal)

Checkpoint

Basic responsive checks pass


Issue GitHub

Titre: "Client: components library and responsive fixes"



---

Semaine 5 â€” Module restaurant & tests (5 jours)

Objectif semaine

ImplÃ©menter menu, inventaire, ventes et ajouter tests unitaires et dâ€™intÃ©gration.

Jour 1 â€” API products & inventory

Objectifs : CRUD products, inventory adjustments

Checkpoint

Products CRUD tested via Postman


Issue GitHub

Titre: "API: products & inventory"



---

Jour 2 â€” Client: menu page

Objectifs : page /restaurant/menu, search, add to order

Checkpoint

Order creation flows to server


Issue GitHub

Titre: "Client: menu page"



---

Jour 3 â€” Sales & link to room invoices

Objectifs : sale entries, option to bill to room

Checkpoint

Sale recorded and linkable to reservation


Issue GitHub

Titre: "API: sales + link to reservations"



---

Jour 4 â€” Tests unitaires (Vitest)

Objectifs : config Vitest, Ã©crire tests pour DatabaseStorage et utilitaires

Commandes

pnpm add -D vitest @types/jest
# ajouter script "test:server"

Checkpoint

Tests passent localement


Issue GitHub

Titre: "Tests: Vitest config + storage tests"



---

Jour 5 â€” Tests dâ€™intÃ©gration (supertest)

Objectifs : Ã©crire tests pour routes critiques (auth, create booking)

Checkpoint

CI pourra exÃ©cuter ces tests


Issue GitHub

Titre: "Tests: integration tests with supertest"



---

Semaine 6 â€” SÃ©curitÃ©, CI/CD & DÃ©ploiement (5 jours)

Objectif semaine

Durcir sÃ©curitÃ©, configurer GitHub Actions et dÃ©ployer app.

Jour 1 â€” SÃ©curitÃ© et hardening

TÃ¢ches : ajouter helmet, express-rate-limit, vÃ©rifier CORS, HTTPS en prod

Checkpoint

Scans npm audit et corrections basiques


Issue GitHub

Titre: "Security: helmet + rate-limit"



---

Jour 2 â€” PrÃ©parer variables et secrets

TÃ¢ches : .env.production template, secrets manager notes

Checkpoint

.env.example prÃªt


Issue GitHub

Titre: "Ops: env.example and secrets"



---

Jour 3 â€” GitHub Actions (CI)

TÃ¢ches : pipeline : install, test, build (client + server)

Exemple workflow /.github/workflows/ci.yml

name: CI
on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: pnpm/action-setup@v2
        with: { version: '8' }
      - run: pnpm install
      - run: pnpm -w test

Checkpoint

CI green on push


Issue GitHub

Titre: "CI: GitHub Actions setup"



---

Jour 4 â€” DÃ©ploiement (staging)

TÃ¢ches : dÃ©ployer backend+DB sur Railway/Neon, frontend sur Vercel

Checklist deploy

Set DATABASE_URL, JWT_SECRET, STRIPE_KEYS

Build & run smoke tests


Checkpoint

App accessible en staging URL


Issue GitHub

Titre: "Deploy: staging setup"



---

Jour 5 â€” Go-live & post-deploy checks

TÃ¢ches : tests e2e, monitoring (Sentry), backup plan

Checkpoint

Production ready checklist complet


Issue GitHub

Titre: "Launch: production deploy & checklist"



---

Checkpoints de fin de projet (acceptance criteria)

1. Toutes les routes principales implÃ©mentÃ©es et testÃ©es


2. Auth sÃ©curisÃ© (password hashing, JWT, tokens rÃ©voquÃ©s si nÃ©cessaire)


3. DB migrations reproductibles et versionnÃ©es


4. Frontend connectÃ© et responsive


5. Tests unitaires + intÃ©gration automatiques dans CI


6. DÃ©ploiement automatisÃ© (workflow) avec variables dâ€™environnement configurÃ©es




---

Annexes rapides

Commandes rÃ©cap

pnpm -w install : installer tout dans le workspace

pnpm -w test : lancer tests workspace

pnpm dlx drizzle-kit generate / migrate : migrations


Ressources d'apprentissage

Drizzle ORM docs

TanStack Query docs

Express docs

React + Vite + Tailwind



---

Prochaine action que je peux faire pour toi immÃ©diatement

ğŸ” GÃ©nÃ©rer le GitHub Projects JSON (board avec toutes les issues ciâ€‘dessus) prÃªt Ã  importer.

ğŸ“¦ CrÃ©er les fichiers d'initialisation (package.json templates, tsconfig, .eslintrc, scripts) pour client/server/shared et les ajouter dans le document.

ğŸš€ Commencer Sprint 1 en te fournissant les commandes exactes et les fichiers prÃªts Ã  copier-coller pour exÃ©cuter localement.


Dis-moi directement laquelle tu veux que je fasse maintenant â€” je lâ€™exÃ©cute tout de suite et jâ€™ajoute le rÃ©sultat dans ce document.



Super â€” jâ€™ai transformÃ© le plan de sprints en un guide dâ€™apprentissage complet, jour-par-jour (6 semaines), avec :

actions et commandes prÃ©cises,

snippets prÃªt Ã  copier-coller,

issues GitHub prÃªtes (titres + descriptions),

checkpoints et critÃ¨res dâ€™acceptation. âœ…


Tu veux que je fasse tout de suite lâ€™une des actions suivantes (je lâ€™exÃ©cute et ajoute le rÃ©sultat dans le document) :

1. GÃ©nÃ©rer le GitHub Projects (board) JSON prÃªt Ã  importer.


2. CrÃ©er les fichiers dâ€™initialisation (package.json pour chaque workspace, tsconfig, .eslintrc, scripts).


3. Lancer et dÃ©tailler Sprint 1 avec fichiers complets (schÃ©ma Drizzle final, drizzle.config, migration SQL, commandes pas-Ã -pas).



Dis 1, 2 ou 3 â€” jâ€™exÃ©cute maintenant. ğŸš€

